---
title: 'Step 4: Install the Collector'
install_track_title: Installation Guide (Amazon RDS and Amazon Aurora)
backlink_href: /docs/install
backlink_title: 'Installation Guide'
---

import { useState } from 'react'

import imgRdsNewInstanceRole from "../../images/rds_new_instance_role.png"

import CollectorPkgInstallInstructions from "../../components/CollectorPkgInstallInstructions"
import RepositorySigningKey from "../../components/RepositorySigningKey"

export const CollectorInstallInstructions = () => {
  const [ pkgKind, setPkgKind ] = useState('yum')
  const handleDistroChange = (e) => {
    setPkgKind(e.currentTarget.value)
  }
  return (
    <>
      <p>
        Choose which OS distrubution you are running on your EC2 instance:
      </p>
      <div style={{paddingLeft: '16px', paddingBottom: '8px'}}>
        <label style={{display: 'block', fontWeight: 'normal'}}>
          <input style={{marginRight: '4px'}} type='radio' name='distro' value='yum' onChange={handleDistroChange} checked={pkgKind === 'yum'} />
          RPM based (RHEL, Amazon Linux, Fedora, CentOS)
        </label>
        <label style={{display: 'block', fontWeight: 'normal'}}>
          <input style={{marginRight: '4px'}} type='radio' name='distro' value='deb' onChange={handleDistroChange} checked={pkgKind === 'deb'} />
          Debian based (Debian, Ubuntu)
        </label>
      </div>
      <p>
        SSH into your EC2 instance and, run the following to download and install the package:
      </p>
      {pkgKind === 'deb' ? (
        <CollectorPkgInstallInstructions kind='deb' />
      ) : pkgKind === 'yum' ? (
        <CollectorPkgInstallInstructions kind='yum' />
      ) : null}
    </>
  )
}

## Installing the collector on an Amazon EC2 Instance

For this step, you first need to choose whether you want to install the collector on an existing EC2 instance, or run a new one.

The [pganalyze collector](https://github.com/pganalyze/collector) is a daemon process that continuously collects database statistics, and submits them to the pganalyze dashboard in recurring intervals.

You can either run it on a small instance (a `t3.small` suffices), or add it to an existing EC2 instance in your environment.

## Starting a new EC2 instance

Start a new `t3.small` instance, Amazon Linux 2 based, that has the IAM role applied:

<p>
  <img src={imgRdsNewInstanceRole} width="694.4" />
</p>

Then follow the step to install the collector on Amazon Linux 2 based instances.


## Installing the collector on the instance

<CollectorInstallInstructions />

<RepositorySigningKey />
---

After successful installation the pganalyze collector will now be running in the background on your server.

<Link className="btn btn-success" to="05_configure_the_collector_ec2">
  Proceed to Step 5: Configure the Collector
</Link>
