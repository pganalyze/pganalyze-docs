---
title: 'Enabling pg_stat_statements'
backlink_href: /docs/install
backlink_title: 'Installation Guide'
---

We use the [pg\_stat\_statements](http://www.postgresql.org/docs/current/static/pgstatstatements.html) extension (officially bundled with PostgreSQL) for tracking which queries get executed in your database.

The query information collected by the extension is cleaned and then sent to our servers using our collector script.

The extension's normalization code cleans the actual values from the queries,<br />
turning ```SELECT * FROM t WHERE secret = '123'``` into ```SELECT * FROM t WHERE secret = ?```.

We still recommend that you use prepared statements if you query for highly sensitive data.

Note: We never collect any stored data, or data returned by queries.

## Install official PostgreSQL contrib package

On your database server, make sure that the extensions package is installed.

Debian/Ubuntu:

Debian/Ubuntu includes modules like `pg_stat_statements` in the main package,
therefore no additional install is required.

RedHat/CentOS:

```
sudo yum install postgresql-contrib
```

## Configure PostgreSQL

Add the following entries to your postgres.conf:

```
shared_preload_libraries = 'pg_stat_statements'

# Increase the max size of the query strings Postgres records
track_activity_query_size = 2048

# Track statements generated by stored procedures as well
pg_stat_statements.track = all
```

## Restart the PostgreSQL daemon

```
sudo systemctl restart postgresql
```

(Yeah, we don't like that reboot either, but PostgreSQL requires it for the time being)


<br />
<div><SignupCTA eventLabel="Docs" /></div>
