---
title: 'Enabling pg_stat_statements'
backlink_href: /docs/install
backlink_title: 'Installation Guide'
---

We use the [pg_stat_statements](http://www.postgresql.org/docs/current/static/pgstatstatements.html) extension (officially bundled with PostgreSQL) for tracking which queries get executed in your database.

The query information collected by the extension is cleaned and then sent to our servers using our collector script.

The extension's normalization code cleans the actual values from the queries,<br />
turning ```SELECT * FROM t WHERE secret = '123'``` into ```SELECT * FROM t WHERE secret = ?```.

We still recommend that you use prepared statements if you query for highly sensitive data.

Note: We never collect any stored data, or data returned by queries.

## Install official PostgreSQL contrib package

On your database server, make sure that the extensions package is installed.

Debian/Ubuntu:

Debian/Ubuntu includes `pg_stat_statements` in the main Postgres package,
therefore no additional install is required.

RedHat/CentOS:

```
sudo yum install postgresql-contrib
```

## Configure PostgreSQL

Add the following entries to your postgres.conf:

```
shared_preload_libraries = 'pg_stat_statements'

# Track statements generated by stored procedures as well
pg_stat_statements.track = all

# Increase the maximum number of statements tracked
pg_stat_statements.max = 10000

# Enable tracking of per-query I/O statistics
track_io_timing = 1
```

## Restart the PostgreSQL daemon

If you change `shared_preload_libraries` above, a restart is required:

```
sudo systemctl restart postgresql
```


<br />
<div><SignupCTA eventLabel="Docs" /></div>
