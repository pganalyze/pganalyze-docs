---
title: 'Step 3: Set Up Service Account'
install_track_title: 'Log Insights: Setup (Google Cloud SQL)'
backlink_href: /docs/log-insights/setup/google-cloud-sql
backlink_title: 'Log Insights: Setup (Google Cloud SQL)'
---

Go to "IAM & Admin", click on "Service accounts" and then "Create Service Account".

* Pick a name of your choice, e.g. "pganalyze-collector"
* Grant "Pub/Sub Subscriber" permission to the service account

We now have two options here:

* Option 1: Associate a key to the service account, download the private key in JSON format and specify as value for `gcp_credentials_file` pganalyze collector setting
* Option 2: Assign the service account to the VM directly

To keep things simple and secure, we recommend assigning the service account to the VM. To do so, navigate to your virtual machine.

If your virtual machine is running, you will need to stop it to change the associated service
account. Then, edit the VM instance details, and set the "Service account" setting to the just
created service account. Now, start the VM again.

Local processes on the VM, such as the pganalyze collector, can now access APIs through the service account.

<Link className="btn btn-success" to="04_configure_collector">
  Continue to Step 4: Configure collector
</Link>
