---
title: 'Step 1: Set Up IAM Policy'
install_track_title: 'Log Insights: Setup (Amazon RDS & Amazon Aurora)'
backlink_href: /docs/log-insights/setup/amazon-rds
backlink_title: 'Log Insights: Setup (Amazon RDS & Amazon Aurora)'
---

import imgRdsSetUpIamPolicy from "../../../images/rds_iam_role.png"

export const ImgWorkaround = (props) => <img {...props} />

We first need to setup an IAM policy and user that the collector can use to access RDS information.

To start, go to **[Create IAM policy](https://console.aws.amazon.com/iam/home#/policies$new?step=edit)**, select JSON and then paste the following policy:

```
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Action": [
                "rds:DescribeDBInstances",
                "cloudwatch:GetMetricStatistics"
            ],
            "Effect": "Allow",
            "Resource": "*"
        },
        {
            "Action": [
                "logs:GetLogEvents"
            ],
            "Effect": "Allow",
            "Resource": "arn:aws:logs:*:*:log-group:RDSOSMetrics:log-stream:*"
        },
        {
            "Action": [
                "rds:DescribeDBParameters"
            ],
            "Effect": "Allow",
            "Resource": "arn:aws:rds:*:*:pg:*"
        },
        {
            "Action": [
                "rds:DownloadDBLogFilePortion",
                "rds:DescribeDBLogFiles"
            ],
            "Effect": "Allow",
            "Resource": "arn:aws:rds:*:*:db:*"
        }
    ]
}
```

This policy grants the following access:

- RDS metadata used to discover general instance information
- Cloudwatch metrics to show CPU utilization and other system metrics in pganalyze
- RDS log file download (for [pganalyze Log Insights](https://pganalyze.com/log-insights))

We recommend naming the policy "pganalyze" or similar, so you can easily identify it again.

To complete this step, create an IAM role for pganalyze, and assign it the policy.

<ImgWorkaround
  src={imgRdsSetUpIamPolicy}
  width="520"
  style={{ border: "1px solid grey" }}
/>

---

In the next step we'll use this role to set up fetching your database logs for analysis:

<Link className="btn btn-success" to="02_ensure_api_access">
  Proceed to Step 2: Ensure API access
</Link>
