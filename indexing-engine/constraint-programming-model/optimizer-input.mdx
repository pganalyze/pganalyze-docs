---
title: 'Constraint Programming Model: Optimizer Input'
backlink_href: /docs/indexing-engine/constraint-programming-model
backlink_title: 'Constraint Programming Model'
---

The optimizer takes as input a settings JSON object. All settings are optional, and will be assigned their default value if omitted. The settings must follow this structure:

```json
{
  "Method": "CP",
  "Options": {
    "Goals": [
      {
        "Name": "Minimize Total Cost",
        "Tolerance": 0.0,
        "Options": {}
      },
      {
        "Name": "Minimize Index Write Overhead",
        "Tolerance": 0.1,
        "Options": {}
      }
    ],
    "Rules": {
      "Maximum Index Write Overhead": 2.5
    },
    "Time Limit": 20.0
  }
}
```

The two main fields are `Method` and `Options`. `Method` defines the method used to solve the problem, and can be one of `Greedy` or `CP` (default `Greedy`). If the method is `Greedy`, the [greedy algorithm](miscellaneous#greedy-algorithm) will be used instead of the optimizer described in this document. The `Options` can customize the behavior of the chosen method. The `Greedy` method has only one option: `Good Enough Threshold` (a `float` in range [0.0, 1.0], default 0.5) that defines the "[Good Enough](../good-enough-index-selection)" threshold.

The `CP` method has more options:

| Name       | Type          | Min | Max | Default | Description                             |
|------------|---------------|-----|-----|---------|-----------------------------------------|
| Time Limit | `float`       | 0.0 | ∞   | ∞       | Time allotted to the optimizer          |
| Threads    | `integer`     | 1   | ∞   | 8       | Number of threads used by the optimizer |
| Goals      | `array[Goal]` | n/a | n/a | `[]`    | Ordered list of goals                   |
| Rules      | `array[Rule]` | n/a | n/a | `[]`    | Set of rules                            |

Each goal is defined by its name, tolerance, and options. Currently, no goal has options.

The rules are defined by their name and an associated value. If a rule is not defined in the settings, it will be automatically created and it will be assigned its default value:

| Rule Name                                                           | Type      | Min | Max | Default | Description                                   |
|---------------------------------------------------------------------|-----------|-----|-----|---------|-----------------------------------------------|
| [Maximum Number of Indexes](rules#maximum-number-of-indexes)             | `integer` | 0   | ∞   | ∞       | Maximum number of indexes suggested           |
| [Maximum Index Write Overhead](rules#maximum-index-write-overhead)       | `float`   | 0.0 | ∞   | ∞       | Maximum index write overhead allowed          |
| [Minimum Per-Scan Cost (Normal)](rules#minimum-per-scan-cost-normal)     | `float`   | 1.0 | ∞   | ∞       | Normal scan cost threshold w.r.t. best cost   |
| [Minimum Per-Scan Cost (Priority)](rules#minimum-per-scan-cost-priority) | `float`   | 1.0 | ∞   | ∞       | Priority scan cost threshold w.r.t. best cost |
| [Minimum Coverage](rules#minimum-coverage)                              | `float`   | 0.0 | 1.0 | 0.0     | Portion of coverable scans covered            |


