---
title: 'Track Query Advisor Insights With Alerts'
backlink_href: /docs/query-advisor
backlink_title: 'Query Advisor'
---

Query Advisor automatically detects optimization opportunities, but you need to configure alerts to get notified when new insights are discovered. This guide covers setting up alerts for Query Advisor insights and integrating with your notification workflows.

## Alert configuration overview

Query Advisor checks are **enabled by default** for all databases in your pganalyze organization, but **alerts must be explicitly configured** through alert policies to receive notifications about newly detected optimization opportunities.

### Default behavior
- **Continuous monitoring**: Query Advisor analyzes all incoming EXPLAIN plans automatically
- **Background detection**: Insights are generated and stored without notifications
- **Dashboard visibility**: All insights appear on the Query Advisor landing page
- **No notifications**: You won't receive alerts until explicitly configured

### Alert activation
To receive notifications about Query Advisor insights:
1. **Create or modify alert policies** to include Query Advisor checks
2. **Configure notification channels** (email, Slack, PagerDuty)
3. **Set severity thresholds** based on potential performance impact
4. **Customize alert frequency** to avoid notification fatigue

## Setting up Query Advisor alerts

### Access alert configuration
Navigate to your pganalyze organization settings:

1. Go to **Settings** ‚Üí **Alert Policies**
2. Either create a new alert policy or edit an existing one
3. Look for **Query Advisor** in the available check types

### Configure Query Advisor checks

Query Advisor provides different alert configurations based on insight types:

#### Inefficient Nested Loops alerts
- **High impact threshold**: Queries with >10x row estimation mismatches
- **Runtime threshold**: Inner side execution time >500ms
- **Frequency**: Alert once per unique query pattern

#### ORDER BY + LIMIT alerts  
- **Performance threshold**: Queries examining >1000 rows for small LIMIT
- **Filter efficiency**: <5% of examined rows match WHERE conditions
- **Impact assessment**: Alerts prioritized by potential time savings

### Alert policy example

<CodeBlock language="json">
{`{
  "name": "Query Optimization Opportunities",
  "description": "Alert on Query Advisor insights with high impact potential",
  "checks": {
    "query_advisor_inefficient_nested_loops": {
      "enabled": true,
      "threshold": "high_impact"
    },
    "query_advisor_order_by_limit": {
      "enabled": true, 
      "threshold": "medium_impact"
    }
  },
  "notification_channels": ["email", "slack"],
  "frequency": "immediate"
}`}
</CodeBlock>

## Notification channels

Query Advisor alerts integrate with all pganalyze notification channels:

### Email notifications
- **Insight summary**: Brief description of detected optimization opportunity
- **Performance impact**: Estimated runtime improvement potential
- **Direct links**: Links to Query Advisor insights and affected queries
- **Action guidance**: Next steps for investigating and applying optimizations

### Slack integration
Configure Slack notifications for real-time Query Advisor alerts:

<CodeBlock language="yaml">
{`webhook_url: "https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK"
channel: "#database-performance"
username: "pganalyze-query-advisor"
message_format: |
  üîç *Query Advisor Alert*
  
  *Database:* {{ database_name }}
  *Insight Type:* {{ insight_type }}
  *Potential Impact:* {{ performance_impact }}
  
  *Query:* \`{{ query_truncated }}\`
  
  [View Details]({{ insight_url }}) | [Create Workbook]({{ workbook_url }})`}
</CodeBlock>

### PagerDuty integration
For high-impact optimization opportunities:

- **Severity mapping**: High-impact insights trigger incidents
- **Deduplication**: Prevents duplicate alerts for same query pattern
- **Context data**: Includes query details and performance metrics
- **Resolution automation**: Auto-resolves when optimizations are applied

## Alert frequency and deduplication

### Intelligent deduplication
Query Advisor implements smart deduplication to avoid alert fatigue:

- **Query fingerprinting**: Alerts once per unique query pattern, not per execution
- **Severity escalation**: Alerts again if performance impact increases significantly
- **Resolution tracking**: Stops alerting once optimization is applied and verified

### Frequency options
Configure how often you want to receive Query Advisor alerts:

#### Immediate (recommended)
- **Real-time detection**: Alert as soon as insights are validated
- **Best for**: Production databases where quick optimization is valuable
- **Use case**: Teams with dedicated database performance resources

#### Daily digest
- **Batched summary**: All new insights from the past 24 hours
- **Best for**: Development databases or teams with limited optimization bandwidth
- **Use case**: Regular optimization review cycles

#### Weekly summary
- **Comprehensive report**: All active insights requiring attention
- **Best for**: Strategic optimization planning
- **Use case**: Monthly or quarterly performance improvement initiatives

## Alert content and context

Query Advisor alerts provide comprehensive context for decision-making:

### Alert message structure
```
üîç Query Advisor Alert: ORDER BY + LIMIT Optimization Opportunity

Database: production-db-primary
Table: user_events 
Estimated Impact: 50-100x performance improvement

Query Pattern:
SELECT * FROM user_events 
WHERE user_id = ? 
ORDER BY created_at DESC 
LIMIT 20

Issue: Using created_at index for sorting, filtering 2.3M rows
Solution: Force filtering-first strategy with ORDER BY created_at + 0

[View Insight Details] [Create Workbook] [Dismiss Alert]
```

### Contextual information
Each alert includes:

- **Database and table context**: Where the issue was detected
- **Performance metrics**: Current runtime and improvement potential  
- **Query details**: Parameterized query text and execution frequency
- **Optimization summary**: Brief explanation of issue and solution
- **Action links**: Direct paths to investigation and testing tools

## Advanced alert configuration

### Custom severity thresholds

Adjust alert sensitivity based on your optimization priorities:

<CodeBlock language="yaml">
{`query_advisor_alerts:
  inefficient_nested_loops:
    high_impact:
      row_estimation_ratio: ">50x"
      runtime_threshold: ">2000ms"
    medium_impact:
      row_estimation_ratio: ">10x" 
      runtime_threshold: ">500ms"
  
  order_by_limit:
    high_impact:
      rows_removed_ratio: ">0.95"
      potential_improvement: ">100x"
    medium_impact:
      rows_removed_ratio: ">0.90"
      potential_improvement: ">10x"`}
</CodeBlock>

### Database-specific policies
Configure different alert policies for different database environments:

- **Production databases**: Immediate alerts for high-impact insights
- **Staging databases**: Daily digest for medium+ impact insights  
- **Development databases**: Weekly summary for all insights

### Team-based routing
Route different insight types to appropriate team channels:

- **Backend engineering**: Inefficient nested loops requiring query rewrites
- **Database team**: Complex optimization requiring schema changes
- **DevOps team**: Configuration-based optimizations (work_mem, etc.)

## Monitoring alert effectiveness

### Alert metrics to track
Monitor these metrics to optimize your Query Advisor alert configuration:

#### Alert volume
- **Total alerts per week**: Ensure manageable notification volume
- **Alert-to-action ratio**: Track how many alerts lead to optimizations
- **False positive rate**: Insights that don't reproduce during testing

#### Performance impact  
- **Time to resolution**: How quickly alerts are investigated and resolved
- **Optimization success rate**: Percentage of applied optimizations that improve performance
- **Cumulative impact**: Total query performance improvement from Query Advisor alerts

### Tuning recommendations
Based on alert effectiveness metrics:

- **High false positive rate**: Increase severity thresholds
- **Low action rate**: Provide better documentation or training
- **Alert fatigue**: Implement daily/weekly digests instead of immediate alerts
- **Missing opportunities**: Lower thresholds or expand alert coverage

## Integration with incident management

### Escalation workflows
For critical optimization opportunities:

1. **Immediate alert**: High-impact insight detected
2. **Assignment**: Route to appropriate team based on insight type
3. **Investigation**: Create workbook and validate optimization
4. **Resolution**: Apply optimization and verify improvement  
5. **Follow-up**: Monitor for performance regression

### SLA considerations
Define response time expectations for Query Advisor alerts:

- **High impact insights**: Investigate within 4 hours
- **Medium impact insights**: Investigate within 24 hours  
- **Low impact insights**: Include in weekly optimization review

## Troubleshooting alerts

### Common alert issues

#### No alerts despite slow queries
- **Check auto_explain configuration**: Ensure EXPLAIN plans are being collected
- **Verify alert policy**: Confirm Query Advisor checks are enabled
- **Review thresholds**: Alerts may be filtered by severity settings

#### Too many alerts
- **Increase thresholds**: Raise impact requirements for alerting
- **Enable deduplication**: Ensure query fingerprinting is working correctly
- **Batch notifications**: Switch to daily digest mode

#### Alerts for resolved issues
- **Check resolution detection**: Verify that applied optimizations are recognized
- **Update alert policies**: Ensure proper integration with workbook workflows
- **Manual dismissal**: Dismiss alerts for permanently optimized queries

## Next steps

- **[Query Advisor workflow](/docs/query-advisor/from-insight-to-conclusion)** - Learn the complete optimization process
- **[Workbooks integration](/docs/workbooks)** - Set up testing environment for validating insights
- **[Check-Up configuration](/docs/checks)** - Configure other pganalyze automated checks and alerts